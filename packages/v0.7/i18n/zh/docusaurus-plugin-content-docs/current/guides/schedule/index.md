---
sidebar_position: 4
title: Schedule
---

# 定时任务

大多数时候，我们可能需要定期运行爬虫[任务](../task/index.md)，以对[蜘蛛](../spider/index.md)进行周期性抓取。现在你需要一个定时任务。

在CrawLab中的“定时任务”概念类似于Linux中的[crontab](https://www.tutorialspoint.com/unix_commands/crontab.htm)。它是一个长期存在的作业，以周期性方式运行蜘蛛任务。

:::tip
如果您希望配置一个自动每天/每周/每月运行抓取任务的网络爬虫，您应该设置一个“定时任务”。定时任务是自动化事物的正确方法，特别是对于那些需要增量内容的蜘蛛。
:::

## 创建定时任务

1. 导航到`定时任务`页面。
2. 点击左上角的`新建定时任务`按钮。
3. 输入包括`名称`、[Cron表达式](https://www.tutorialspoint.com/unix_commands/crontab.htm)和`蜘蛛`在内的基本信息。
4. 点击`确认`。

创建的定时任务默认启用。一旦创建了一个已启用的定时任务，它应根据您设置的cron表达式按时触发[任务](../task/index.md)。

:::tip
您可以通过创建一个新的定时任务来调试CrawLab中的定时任务模块是否正常工作，将`Cron表达式`设置为`* * * * *`，这意味着“每分钟”，这样您可以检查当新的一分钟开始时是否会触发任务。
:::

## 启用/禁用定时任务

您可以通过切换`定时任务`页面和定时任务详细页面中`启用`属性的开关按钮来启用或禁用定时任务。

## Cron表达式

*Cron表达式*是一种描述任务周期性的简单且标准的格式。它与Linux `crontab`中的格式相同。

```
*    *    *   *    *  要执行的命令
|    |    |    |   |       
|    |    |    |    星期几 (0 - 6) (周日 = 0)
|    |    |    |
|    |    |    月份 (1 - 12)
|    |    |
|    |    日期 (1 - 31)
|    |
|    小时 (0 - 23)
|
分钟 (0 - 59)
```

- 星号(*)操作符指定字段的所有可能值。例如：每小时或每天。
- 逗号(,)操作符指定一系列值，例如："1,3,4,7,8"。
- 连字符(-)操作符指定一个范围的值，例如："1-6"，这等同于"1,2,3,4,5,6"。
- 斜杠(/)操作符可以用来跳过给定数量的值。例如，在小时时间字段中的"\*/3"等同于"0,3,6,9,12,15,18,21"；"*"指定每小时，但"/3"意味着只使用由"*"给出的第一个、第四个、第七个...等值。

:::warning
CrawLab中的*Cron表达式*与Linux `crontab`中的格式相同。也就是说，最小单位是**`分钟`**。这与某些最小单位为秒的crontab风格调度框架不同。
:::

:::tip
如果您不确定您的cron表达式，您可以前往[https://crontab.guru](https://crontab.guru/)验证其正确性。
:::